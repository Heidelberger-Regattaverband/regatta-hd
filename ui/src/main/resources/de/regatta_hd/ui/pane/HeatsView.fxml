<?xml version="1.0" encoding="UTF-8"?>

<?import de.regatta_hd.commons.fx.control.DateTimeTableCellFactory?>
<?import de.regatta_hd.ui.util.SerialPortStringConverter?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.ToolBar?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.RowConstraints?>

<GridPane fx:id="rootPane" xmlns="http://javafx.com/javafx/18" xmlns:fx="http://javafx.com/fxml/1"
  fx:controller="de.regatta_hd.ui.pane.HeatsController">
  <padding>
    <Insets bottom="10.0" left="10.0" right="10.0" />
  </padding>

  <children>
    <ToolBar GridPane.columnIndex="0" GridPane.rowIndex="0">
      <items>
        <Button fx:id="refreshBtn" onAction="#handleRefreshOnAction" text="%common.refresh" />
        <Button fx:id="exportCsvBtn" onAction="#handleExportCsvOnAction" text="%heats.csv.export" />
        <Button fx:id="exportXslBtn" onAction="#handleExportXslOnAction" text="%heats.xsl.export" />
        <ComboBox fx:id="serialPortsCBox" prefWidth="300">
          <converter>
            <SerialPortStringConverter />
          </converter>
        </ComboBox>
      </items>
    </ToolBar>
    <SplitPane dividerPositions="0.7" orientation="VERTICAL" GridPane.hgrow="ALWAYS" GridPane.rowIndex="1" GridPane.vgrow="ALWAYS">
      <items>
        <TableView fx:id="heatsTbl">
          <placeholder>
            <Label text="%common.noDataAvailable" />
          </placeholder>
          <columns>
            <TableColumn fx:id="heatsIdCol" reorderable="false" resizable="false" style="-fx-alignment: CENTER;" text="%common.id" prefWidth="50">
              <cellValueFactory>
                <PropertyValueFactory>
                  <property>id</property>
                </PropertyValueFactory>
              </cellValueFactory>
            </TableColumn>
            <TableColumn reorderable="false" resizable="false" style="-fx-alignment: CENTER;" text="%common.heat" prefWidth="45">
              <cellValueFactory>
                <PropertyValueFactory>
                  <property>number</property>
                </PropertyValueFactory>
              </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="timeCol" reorderable="false" resizable="false" sortable="true" style="-fx-alignment: CENTER;" text="%common.time" prefWidth="145">
              <cellValueFactory>
                <PropertyValueFactory>
                  <property>time</property>
                </PropertyValueFactory>
              </cellValueFactory>
              <cellFactory>
                <DateTimeTableCellFactory fx:factory="createMedium" />
              </cellFactory>
            </TableColumn>
            <TableColumn reorderable="false" resizable="false" style="-fx-alignment: CENTER;" text="%common.raceNrAbr" prefWidth="50">
              <cellValueFactory>
                <PropertyValueFactory>
                  <property>raceNumber</property>
                </PropertyValueFactory>
              </cellValueFactory>
            </TableColumn>
            <TableColumn reorderable="false" resizable="false" sortable="false" style="-fx-alignment: CENTER;" text="%common.devisionAbr" prefWidth="70">
              <cellValueFactory>
                <PropertyValueFactory>
                  <property>devisionLabel</property>
                </PropertyValueFactory>
              </cellValueFactory>
            </TableColumn>
            <TableColumn reorderable="false" resizable="false" sortable="false" text="%common.shortLabelAbr" prefWidth="140">
              <cellValueFactory>
                <PropertyValueFactory>
                  <property>raceShortLabel</property>
                </PropertyValueFactory>
              </cellValueFactory>
            </TableColumn>
            <TableColumn reorderable="false" resizable="false" sortable="true" style="-fx-alignment: CENTER;" text="%common.state" prefWidth="75">
              <cellValueFactory>
                <PropertyValueFactory>
                  <property>stateLabel</property>
                </PropertyValueFactory>
              </cellValueFactory>
            </TableColumn>
          </columns>
        </TableView>

        <TableView fx:id="divisionTbl">
          <placeholder>
            <Label text="%common.noDataAvailable" />
          </placeholder>
          <columns>
            <TableColumn fx:id="divisionIdCol" reorderable="false" resizable="false" sortable="false" style="-fx-alignment: CENTER;" text="%common.id" prefWidth="50">
              <cellValueFactory>
                <PropertyValueFactory>
                  <property>id</property>
                </PropertyValueFactory>
              </cellValueFactory>
            </TableColumn>
            <TableColumn reorderable="false" resizable="false" sortable="false" style="-fx-alignment: CENTER;" text="%common.lane" prefWidth="45">
              <cellValueFactory>
                <PropertyValueFactory>
                  <property>lane</property>
                </PropertyValueFactory>
              </cellValueFactory>
            </TableColumn>
            <TableColumn reorderable="false" resizable="false" sortable="false" style="-fx-alignment: CENTER;" text="%common.bibAbr" prefWidth="45">
              <cellValueFactory>
                <PropertyValueFactory>
                  <property>bib</property>
                </PropertyValueFactory>
              </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="boatCol" reorderable="false" sortable="false" text="%common.boat" prefWidth="200">
              <cellValueFactory>
                <PropertyValueFactory>
                  <property>boatLabel</property>
                </PropertyValueFactory>
              </cellValueFactory>
            </TableColumn>
            <TableColumn reorderable="false" resizable="false" sortable="false" style="-fx-alignment: CENTER;" text="%common.rank" prefWidth="45">
              <cellValueFactory>
                <PropertyValueFactory>
                  <property>resultRank</property>
                </PropertyValueFactory>
              </cellValueFactory>
            </TableColumn>
            <TableColumn reorderable="false" resizable="false" sortable="false" style="-fx-alignment: CENTER;" text="%common.result" prefWidth="70">
              <cellValueFactory>
                <PropertyValueFactory>
                  <property>resultDisplayValue</property>
                </PropertyValueFactory>
              </cellValueFactory>
            </TableColumn>
            <TableColumn reorderable="false" resizable="false" sortable="false" style="-fx-alignment: CENTER;" text="%common.points" prefWidth="50">
              <cellValueFactory>
                <PropertyValueFactory>
                  <property>points</property>
                </PropertyValueFactory>
              </cellValueFactory>
            </TableColumn>
          </columns>
        </TableView>
      </items>
    </SplitPane>
  </children>

  <columnConstraints>
    <ColumnConstraints fillWidth="true" hgrow="ALWAYS" />
  </columnConstraints>
  <rowConstraints>
    <RowConstraints />
    <RowConstraints />
  </rowConstraints>

</GridPane>
